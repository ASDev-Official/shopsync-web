{% extends "base.html" %}

{% block header %}
  <!-- Render header -->
  <header class="md-header md-header--shadow" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="{{ lang.t('header') }}">

      <!-- Link to home -->
      <a href="{{ config.extra.homepage | d(nav.homepage.url, true) | url }}" title="{{ config.site_name | e }}" class="md-header__button md-logo" aria-label="{{ config.site_name }}" data-md-component="logo">
        {% include "partials/logo.html" %}
      </a>

      <!-- Button to open drawer -->
      <label class="md-header__button md-icon" for="__drawer">
        {% set icon = config.theme.icon.menu or "material/menu" %}
        {% include ".icons/" ~ icon ~ ".svg" %}
      </label>

      <!-- Header title -->
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
              {{ config.site_name }}
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            <span class="md-ellipsis">
              {% if page.meta and page.meta.title %}
                {{ page.meta.title }}
              {% else %}
                {{ page.title }}
              {% endif %}
            </span>
          </div>
        </div>
      </div>

      <!-- Back to Home Button -->
      <div class="md-header__source">
        <a href="/" class="md-source" data-md-component="back-home" title="Back to home">
          <div class="md-source__icon md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
          </div>
          <div class="md-source__repository">
            Back to home
          </div>
        </a>
      </div>

      <!-- Color palette toggle -->
      {% if config.theme.palette %}
        {% if not config.theme.palette is mapping %}
          {% include "partials/palette.html" %}
        {% endif %}
      {% endif %}

      <!-- User preference: color palette -->
      {% if not config.theme.palette is mapping %}
        {% include "partials/javascripts/palette.html" %}
      {% endif %}

      <!-- Site language selector -->
      {% if config.extra.alternate %}
        {% include "partials/alternate.html" %}
      {% endif %}

      <!-- Button to open search modal -->
      {% if "material/search" in config.plugins %}
        <label class="md-header__button md-icon" for="__search">
          {% set icon = config.theme.icon.search or "material/magnify" %}
          {% include ".icons/" ~ icon ~ ".svg" %}
        </label>

        <!-- Search interface -->
        {% include "partials/search.html" %}
      {% endif %}

      <!-- Repository information -->
      {% if config.repo_url %}
        <div class="md-header__source">
          {% include "partials/source.html" %}
        </div>
      {% endif %}
    </nav>

    <!-- Navigation tabs (sticky) -->
    {% if "navigation.tabs.sticky" in config.theme.features %}
      {% if "navigation.tabs" in config.theme.features %}
        {% include "partials/tabs.html" %}
      {% endif %}
    {% endif %}
  </header>
{% endblock %}
